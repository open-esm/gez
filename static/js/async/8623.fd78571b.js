"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["8623"],{3521:function(e,n,r){r.r(n),r.d(n,{default:()=>c});var a=r(31549),i=r(6603);function s(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",strong:"strong",h2:"h2",h3:"h3",pre:"pre",code:"code",h4:"h4"},(0,i.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"rendercontext",children:["RenderContext",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rendercontext",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"RenderContext to gł\xf3wna klasa w frameworku Gez, odpowiedzialna za zarządzanie pełnym cyklem życia renderowania po stronie serwera (SSR). Dostarcza kompleksowy zestaw API do obsługi kontekstu renderowania, zarządzania zasobami, synchronizacji stanu i innych kluczowych zadań:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Kontrola renderowania"}),": Zarządzanie procesem renderowania po stronie serwera, wsparcie dla wielu punkt\xf3w wejścia, renderowanie warunkowe itp."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Zarządzanie zasobami"}),": Inteligentne zbieranie i wstrzykiwanie zasob\xf3w statycznych, takich jak JS, CSS, w celu optymalizacji wydajności ładowania."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Synchronizacja stanu"}),": Obsługa serializacji stanu po stronie serwera, zapewnienie poprawnej hydratacji po stronie klienta."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Kontrola routingu"}),": Wsparcie dla przekierowań po stronie serwera, ustawianie kod\xf3w statusu HTTP i innych zaawansowanych funkcji."]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"definicje-typ\\xf3w",children:["Definicje typ\xf3w",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#definicje-typ\\xf3w",children:"#"})]}),"\n",(0,a.jsxs)(n.h3,{id:"serverrenderhandle",children:["ServerRenderHandle",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serverrenderhandle",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"Definicja typu funkcji obsługującej renderowanie po stronie serwera."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"type ServerRenderHandle = (rc: RenderContext) => Promise<void> | void;\n"})}),"\n",(0,a.jsx)(n.p,{children:"Funkcja obsługująca renderowanie po stronie serwera to funkcja asynchroniczna lub synchroniczna, kt\xf3ra przyjmuje instancję RenderContext jako parametr i służy do obsługi logiki renderowania po stronie serwera."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// 1. Funkcja asynchroniczna\nexport default async (rc: RenderContext) => {\n  const app = createApp();\n  const html = await renderToString(app);\n  rc.html = html;\n};\n\n// 2. Funkcja synchroniczna\nexport const simple = (rc: RenderContext) => {\n  rc.html = '<h1>Hello World</h1>';\n};\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"renderfiles",children:["RenderFiles",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#renderfiles",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"Definicja typu listy plik\xf3w zasob\xf3w zebranych podczas procesu renderowania."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"interface RenderFiles {\n  js: string[];\n  css: string[];\n  modulepreload: string[];\n  resources: string[];\n}\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"js"}),": Lista plik\xf3w JavaScript"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"css"}),": Lista arkuszy styl\xf3w"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"modulepreload"}),": Lista moduł\xf3w ESM do wstępnego załadowania"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"resources"}),": Lista innych zasob\xf3w (obrazy, czcionki itp.)"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Przykład listy plik\xf3w zasob\xf3w\nrc.files = {\n  js: [\n    '/assets/entry-client.js',\n    '/assets/vendor.js'\n  ],\n  css: [\n    '/assets/main.css',\n    '/assets/vendor.css'\n  ],\n  modulepreload: [\n    '/assets/Home.js',\n    '/assets/About.js'\n  ],\n  resources: [\n    '/assets/logo.png',\n    '/assets/font.woff2'\n  ]\n};\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"importmapmode",children:["ImportmapMode",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"Definicja trybu generowania importmap."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"type ImportmapMode = 'inline' | 'js';\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"inline"}),": Wstawia zawartość importmap bezpośrednio do HTML, odpowiednie w następujących scenariuszach:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Konieczność zmniejszenia liczby żądań HTTP"}),"\n",(0,a.jsx)(n.li,{children:"Zawartość importmap jest mała"}),"\n",(0,a.jsx)(n.li,{children:"Wysokie wymagania dotyczące wydajności ładowania pierwszej strony"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"js"}),": Generuje zawartość importmap jako osobny plik JS, odpowiednie w następujących scenariuszach:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Zawartość importmap jest duża"}),"\n",(0,a.jsx)(n.li,{children:"Konieczność wykorzystania mechanizmu cache przeglądarki"}),"\n",(0,a.jsx)(n.li,{children:"Wiele stron wsp\xf3łdzieli ten sam importmap"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Klasa kontekstu renderowania, odpowiedzialna za zarządzanie zasobami i generowanie HTML podczas renderowania po stronie serwera (SSR)."}),"\n",(0,a.jsxs)(n.h2,{id:"opcje-instancji",children:["Opcje instancji",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#opcje-instancji",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"Definicja opcji konfiguracyjnych kontekstu renderowania."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"interface RenderContextOptions {\n  base?: string\n  entryName?: string\n  params?: Record<string, any>\n  importmapMode?: ImportmapMode\n}\n"})}),"\n",(0,a.jsxs)(n.h4,{id:"base",children:["base",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Podstawowa ścieżka zasob\xf3w statycznych."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Wszystkie zasoby statyczne (JS, CSS, obrazy itp.) są ładowane względem tej ścieżki"}),"\n",(0,a.jsx)(n.li,{children:"Obsługa dynamicznej konfiguracji w czasie wykonywania, bez konieczności ponownego budowania"}),"\n",(0,a.jsx)(n.li,{children:"Często używane w witrynach wielojęzycznych, aplikacjach mikrofrontendowych itp."}),"\n"]}),"\n",(0,a.jsxs)(n.h4,{id:"entryname",children:["entryName",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Nazwa funkcji wejściowej renderowania po stronie serwera. Służy do określenia funkcji wejściowej używanej podczas renderowania po stronie serwera, gdy moduł eksportuje wiele funkcji renderowania."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"export const mobile = async (rc: RenderContext) => {\n  // Logika renderowania dla urządzeń mobilnych\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // Logika renderowania dla urządzeń stacjonarnych\n};\n"})}),"\n",(0,a.jsxs)(n.h4,{id:"params",children:["params",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Parametry renderowania. Można przekazać parametry dowolnego typu do funkcji renderowania, często używane do przekazywania informacji o żądaniu (URL, parametry zapytania itp.)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN',\n    theme: 'dark'\n  }\n});\n"})}),"\n",(0,a.jsxs)(n.h4,{id:"importmapmode-1",children:["importmapMode",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-1",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Tryb generowania mapy import\xf3w (Import Map):"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"inline"}),": Wstawia zawartość importmap bezpośrednio do HTML"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"js"}),": Generuje zawartość importmap jako osobny plik JS"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"właściwości-instancji",children:["Właściwości instancji",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#właściwości-instancji",children:"#"})]}),"\n",(0,a.jsxs)(n.h3,{id:"gez",children:["gez",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gez",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"Gez"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Tylko do odczytu"}),": ",(0,a.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Referencja do instancji Gez. Służy do dostępu do podstawowych funkcji i informacji konfiguracyjnych frameworka."}),"\n",(0,a.jsxs)(n.h3,{id:"redirect",children:["redirect",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#redirect",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"string | null"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Adres przekierowania. Po ustawieniu serwer może wykonać przekierowanie HTTP na podstawie tej wartości, często używane w scenariuszach weryfikacji logowania, kontroli uprawnień itp."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Przykład weryfikacji logowania\nexport default async (rc: RenderContext) => {\n  if (!isLoggedIn()) {\n    rc.redirect = '/login';\n    rc.status = 302;\n    return;\n  }\n  // Kontynuacja renderowania strony...\n};\n\n// Przykład kontroli uprawnień\nexport default async (rc: RenderContext) => {\n  if (!hasPermission()) {\n    rc.redirect = '/403';\n    rc.status = 403;\n    return;\n  }\n  // Kontynuacja renderowania strony...\n};\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"status",children:["status",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#status",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"number | null"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Kod statusu HTTP odpowiedzi. Można ustawić dowolny prawidłowy kod statusu HTTP, często używany w scenariuszach obsługi błęd\xf3w, przekierowań itp."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Przykład obsługi błędu 404\nexport default async (rc: RenderContext) => {\n  const page = await findPage(rc.params.url);\n  if (!page) {\n    rc.status = 404;\n    // Renderowanie strony 404...\n    return;\n  }\n  // Kontynuacja renderowania strony...\n};\n\n// Przykład tymczasowego przekierowania\nexport default async (rc: RenderContext) => {\n  if (needMaintenance()) {\n    rc.redirect = '/maintenance';\n    rc.status = 307; // Tymczasowe przekierowanie, zachowanie metody żądania\n    return;\n  }\n  // Kontynuacja renderowania strony...\n};\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"html",children:["html",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Zawartość HTML. Służy do ustawiania i pobierania ostatecznie wygenerowanej zawartości HTML, automatycznie obsługuje symbole zastępcze podstawowej ścieżki."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Podstawowe użycie\nexport default async (rc: RenderContext) => {\n  // Ustawienie zawartości HTML\n  rc.html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        ${rc.preload()}\n        ${rc.css()}\n      </head>\n      <body>\n        <div id=\"app\">Hello World</div>\n        ${rc.importmap()}\n        ${rc.moduleEntry()}\n        ${rc.modulePreload()}\n      </body>\n    </html>\n  `;\n};\n\n// Dynamiczna podstawowa ścieżka\nconst rc = await gez.render({\n  base: '/app',  // Ustawienie podstawowej ścieżki\n  params: { url: req.url }\n});\n\n// Symbole zastępcze w HTML są automatycznie zastępowane:\n// [[[___GEZ_DYNAMIC_BASE___]]]/your-app-name/css/style.css\n// Zastąpione przez:\n// /app/your-app-name/css/style.css\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"base-1",children:["base",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base-1",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Tylko do odczytu"}),": ",(0,a.jsx)(n.code,{children:"true"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Podstawowa ścieżka zasob\xf3w statycznych. Wszystkie zasoby statyczne (JS, CSS, obrazy itp.) są ładowane względem tej ścieżki, obsługa dynamicznej konfiguracji w czasie wykonywania."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Podstawowe użycie\nconst rc = await gez.render({\n  base: '/gez',  // Ustawienie podstawowej ścieżki\n  params: { url: req.url }\n});\n\n// Przykład witryny wielojęzycznej\nconst rc = await gez.render({\n  base: '/cn',  // Witryna chińska\n  params: { lang: 'zh-CN' }\n});\n\n// Przykład aplikacji mikrofrontendowej\nconst rc = await gez.render({\n  base: '/app1',  // Podrzędna aplikacja 1\n  params: { appId: 1 }\n});\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"entryname-1",children:["entryName",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname-1",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Tylko do odczytu"}),": ",(0,a.jsx)(n.code,{children:"true"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Nazwa funkcji wejściowej renderowania po stronie serwera. Służy do wyboru funkcji renderowania z pliku entry.server.ts."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Domyślna funkcja wejściowa\nexport default async (rc: RenderContext) => {\n  // Domyślna logika renderowania\n};\n\n// Wiele funkcji wejściowych\nexport const mobile = async (rc: RenderContext) => {\n  // Logika renderowania dla urządzeń mobilnych\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // Logika renderowania dla urządzeń stacjonarnych\n};\n\n// Wyb\xf3r funkcji wejściowej na podstawie typu urządzenia\nconst rc = await gez.render({\n  entryName: isMobile ? 'mobile' : 'desktop',\n  params: { url: req.url }\n});\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"params-1",children:["params",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params-1",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Tylko do odczytu"}),": ",(0,a.jsx)(n.code,{children:"true"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Parametry renderowania. Można przekazywać i uzyskiwać dostęp do parametr\xf3w podczas renderowania po stronie serwera, często używane do przekazywania informacji o żądaniu, konfiguracji strony itp."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Podstawowe użycie - przekazywanie URL i ustawień języka\nconst rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN'\n  }\n});\n\n// Konfiguracja strony - ustawienie motywu i układu\nconst rc = await gez.render({\n  params: {\n    theme: 'dark',\n    layout: 'sidebar'\n  }\n});\n\n// Konfiguracja środowiska - wstrzyknięcie adresu API\nconst rc = await gez.render({\n  params: {\n    apiBaseUrl: process.env.API_BASE_URL,\n    version: '1.0.0'\n  }\n});\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"importmetaset",children:["importMetaSet",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmetaset",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"Set<ImportMeta>"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Zbi\xf3r zależności moduł\xf3w. Automatycznie śledzi i rejestruje zależności moduł\xf3w podczas renderowania komponent\xf3w, zbiera tylko zasoby faktycznie używane podczas renderowania bieżącej strony."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Podstawowe użycie\nconst renderToString = (app: any, context: { importMetaSet: Set<ImportMeta> }) => {\n  // Automatyczne zbieranie zależności moduł\xf3w podczas renderowania\n  // Framework automatycznie wywołuje context.importMetaSet.add(import.meta) podczas renderowania komponent\xf3w\n  // Programiści nie muszą ręcznie obsługiwać zbierania zależności\n  return '<div id=\"app\">Hello World</div>';\n};\n\n// Przykład użycia\nconst app = createApp();\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"files",children:["files",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#files",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"RenderFiles"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Lista plik\xf3w zasob\xf3w:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"js: Lista plik\xf3w JavaScript"}),"\n",(0,a.jsx)(n.li,{children:"css: Lista arkuszy styl\xf3w"}),"\n",(0,a.jsx)(n.li,{children:"modulepreload: Lista moduł\xf3w ESM do wstępnego załadowania"}),"\n",(0,a.jsx)(n.li,{children:"resources: Lista innych zasob\xf3w (obrazy, czcionki itp.)"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Zbieranie zasob\xf3w\nawait rc.commit();\n\n// Wstrzykiwanie zasob\xf3w\nrc.html = `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    \x3c!-- Wstępne ładowanie zasob\xf3w --\x3e\n    ${rc.preload()}\n    \x3c!-- Wstrzykiwanie arkuszy styl\xf3w --\x3e\n    ${rc.css()}\n  </head>\n  <body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n  </body>\n  </html>\n`;\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"importmapmode-2",children:["importmapMode",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-2",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Typ"}),": ",(0,a.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Domyślna wartość"}),": ",(0,a.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Tryb generowania mapy import\xf3w:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"inline"}),": Wstawia zawartość importmap bezpośrednio do HTML"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"js"}),": Generuje zawartość importmap jako osobny plik JS"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"metody-instancji",children:["Metody instancji",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#metody-instancji",children:"#"})]}),"\n",(0,a.jsxs)(n.h3,{id:"serialize",children:["serialize()",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serialize",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Parametry"}),":","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"input: any"})," - Dane do serializacji"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"options?: serialize.SerializeJSOptions"})," - Opcje serializacji"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Zwraca"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Serializuje obiekt JavaScript do ciągu znak\xf3w. Służy do serializacji danych stanu podczas renderowania po stronie serwera, zapewniając bezpieczne osadzenie danych w HTML."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const state = {\n  user: { id: 1, name: 'Alice' },\n  timestamp: new Date()\n};\n\nrc.html = `\n  <script>\n    window.__INITIAL_STATE__ = ${rc.serialize(state)};\n  <\/script>\n`;\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"state",children:["state()",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#state",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Parametry"}),":","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"varName: string"})," - Nazwa zmiennej"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"data: Record<string, any>"})," - Dane stanu"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Zwraca"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Serializuje dane stanu i wstrzykuje je do HTML. Używa bezpiecznych metod serializacji danych, obsługuje złożone struktury danych."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const userInfo = {\n  id: 1,\n  name: 'John',\n  roles: ['admin']\n};\n\nrc.html = `\n  <head>\n    ${rc.state('__USER__', userInfo)}\n  </head>\n`;\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"commit",children:["commit()",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#commit",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Zwraca"}),": ",(0,a.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Zatwierdza zbieranie zależności i aktualizuje listę zasob\xf3w. Zbiera wszystkie używane moduły z importMetaSet, analizuje konkretne zasoby każdego modułu na podstawie pliku manifest."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Renderowanie i zatwierdzanie zależności\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n\n// Zatwierdzanie zbierania zależności\nawait rc.commit();\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"preload",children:["preload()",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preload",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Zwraca"}),": ",(0,a.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Generuje znaczniki wstępnego ładowania zasob\xf3w. Służy do wstępnego ładowania zasob\xf3w CSS i JavaScript, obsługuje konfigurację priorytet\xf3w, automatycznie obsługuje podstawową ścieżkę."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <!DOCTYPE html>\n"})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(s,{...e})}):s(e)}let c=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["pl%2Fapi%2Fcore%2Frender-context.md"]={toc:[{text:"Definicje typ\xf3w",id:"definicje-typ\xf3w",depth:2},{text:"ServerRenderHandle",id:"serverrenderhandle",depth:3},{text:"RenderFiles",id:"renderfiles",depth:3},{text:"ImportmapMode",id:"importmapmode",depth:3},{text:"Opcje instancji",id:"opcje-instancji",depth:2},{text:"base",id:"base",depth:4},{text:"entryName",id:"entryname",depth:4},{text:"params",id:"params",depth:4},{text:"importmapMode",id:"importmapmode-1",depth:4},{text:"Właściwości instancji",id:"właściwości-instancji",depth:2},{text:"gez",id:"gez",depth:3},{text:"redirect",id:"redirect",depth:3},{text:"status",id:"status",depth:3},{text:"html",id:"html",depth:3},{text:"base",id:"base-1",depth:3},{text:"entryName",id:"entryname-1",depth:3},{text:"params",id:"params-1",depth:3},{text:"importMetaSet",id:"importmetaset",depth:3},{text:"files",id:"files",depth:3},{text:"importmapMode",id:"importmapmode-2",depth:3},{text:"Metody instancji",id:"metody-instancji",depth:2},{text:"serialize()",id:"serialize",depth:3},{text:"state()",id:"state",depth:3},{text:"commit()",id:"commit",depth:3},{text:"preload()",id:"preload",depth:3}],title:"RenderContext",headingTitle:"RenderContext",frontmatter:{titleSuffix:"Dokumentacja API kontekstu renderowania frameworka Gez",description:"Szczeg\xf3łowy opis klasy RenderContext, rdzenia frameworka Gez, obejmujący kontrolę renderowania, zarządzanie zasobami, synchronizację stanu i kontrolę routingu, pomagający programistom w efektywnym renderowaniu po stronie serwera.",head:[["meta",{property:"keywords",content:"Gez, RenderContext, SSR, renderowanie po stronie serwera, kontekst renderowania, synchronizacja stanu, zarządzanie zasobami, framework aplikacji webowych"}]]}}}}]);