"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["8310"],{83478:function(n,e,s){s.r(e),s.d(e,{default:()=>l});var i=s(31549),r=s(6603);function c(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",ul:"ul",li:"li",strong:"strong",h2:"h2",pre:"pre",h3:"h3",h4:"h4"},(0,r.ah)(),n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"packconfig",children:["PackConfig",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"PackConfig"})," เป็นอินเทอร์เฟซการกำหนดค่าการแพ็คเกจซอฟต์แวร์ ใช้สำหรับแพ็คผลลัพธ์การสร้างบริการเป็นแพ็คเกจซอฟต์แวร์รูปแบบมาตรฐาน .tgz ของ npm"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"มาตรฐาน"}),": ใช้รูปแบบการแพ็ค .tgz มาตรฐานของ npm"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"ความสมบูรณ์"}),": รวมไฟล์ที่จำเป็นทั้งหมด เช่น ซอร์สโค้ดโมดูล ไฟล์ประกาศประเภท และไฟล์กำหนดค่า"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"ความเข้ากันได้"}),": เข้ากันได้อย่างสมบูรณ์กับระบบนิเวศ npm และรองรับเวิร์กโฟลว์การจัดการแพ็คเกจมาตรฐาน"]}),"\n"]}),"\n",(0,i.jsxs)(e.h2,{id:"นิยามประเภท",children:["นิยามประเภท",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#นิยามประเภท",children:"#"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"interface PackConfig {\n    enable?: boolean;\n    outputs?: string | string[] | boolean;\n    packageJson?: (gez: Gez, pkg: Record<string, any>) => Promise<Record<string, any>>;\n    onBefore?: (gez: Gez, pkg: Record<string, any>) => Promise<void>;\n    onAfter?: (gez: Gez, pkg: Record<string, any>, file: Buffer) => Promise<void>;\n}\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"packconfig-1",children:["PackConfig",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig-1",children:"#"})]}),"\n",(0,i.jsxs)(e.h4,{id:"enable",children:["enable",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#enable",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"เปิดใช้งานฟังก์ชันการแพ็คเกจหรือไม่ เมื่อเปิดใช้งานจะแพ็คผลลัพธ์การสร้างเป็นแพ็คเกจซอฟต์แวร์รูปแบบมาตรฐาน .tgz ของ npm"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["ประเภท: ",(0,i.jsx)(e.code,{children:"boolean"})]}),"\n",(0,i.jsxs)(e.li,{children:["ค่าเริ่มต้น: ",(0,i.jsx)(e.code,{children:"false"})]}),"\n"]}),"\n",(0,i.jsxs)(e.h4,{id:"outputs",children:["outputs",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#outputs",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"ระบุเส้นทางไฟล์แพ็คเกจซอฟต์แวร์ที่ต้องการส่งออก รองรับการกำหนดค่าดังต่อไปนี้:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"string"}),": เส้นทางส่งออกเดียว เช่น 'dist/versions/my-app.tgz'"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"string[]"}),": เส้นทางส่งออกหลายเส้นทาง ใช้สำหรับสร้างหลายเวอร์ชันพร้อมกัน"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"boolean"}),": เมื่อเป็น true จะใช้เส้นทางเริ่มต้น 'dist/client/versions/latest.tgz'"]}),"\n"]}),"\n",(0,i.jsxs)(e.h4,{id:"packagejson",children:["packageJson",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packagejson",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"ฟังก์ชันคอลแบ็กสำหรับกำหนดค่าเนื้อหา package.json โดยกำหนดเอง จะถูกเรียกใช้ก่อนการแพ็คเกจ เพื่อกำหนดค่าเนื้อหา package.json เอง"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["พารามิเตอร์:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"gez: Gez"})," - อินสแตนซ์ Gez"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"pkg: any"})," - เนื้อหา package.json ดั้งเดิม"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["ค่าส่งกลับ: ",(0,i.jsx)(e.code,{children:"Promise<any>"})," - เนื้อหา package.json ที่แก้ไขแล้ว"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"การใช้งานทั่วไป:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"แก้ไขชื่อและหมายเลขเวอร์ชันแพ็คเกจ"}),"\n",(0,i.jsx)(e.li,{children:"เพิ่มหรืออัปเดต dependencies"}),"\n",(0,i.jsx)(e.li,{children:"เพิ่มฟิลด์ที่กำหนดเอง"}),"\n",(0,i.jsx)(e.li,{children:"กำหนดค่าข้อมูลการเผยแพร่"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"ตัวอย่าง:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"packageJson: async (gez, pkg) => {\n  // กำหนดข้อมูลแพ็คเกจ\n  pkg.name = 'my-app';\n  pkg.version = '1.0.0';\n  pkg.description = 'แอปพลิเคชันของฉัน';\n\n  // เพิ่ม dependencies\n  pkg.dependencies = {\n    'vue': '^3.0.0',\n    'express': '^4.17.1'\n  };\n\n  // เพิ่มการกำหนดค่าการเผยแพร่\n  pkg.publishConfig = {\n    registry: 'https://registry.example.com'\n  };\n\n  return pkg;\n}\n"})}),"\n",(0,i.jsxs)(e.h4,{id:"onbefore",children:["onBefore",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#onbefore",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"ฟังก์ชันคอลแบ็กสำหรับการเตรียมการก่อนการแพ็คเกจ"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["พารามิเตอร์:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"gez: Gez"})," - อินสแตนซ์ Gez"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"pkg: Record<string, any>"})," - เนื้อหา package.json"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["ค่าส่งกลับ: ",(0,i.jsx)(e.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"การใช้งานทั่วไป:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"เพิ่มไฟล์เพิ่มเติม (README, LICENSE เป็นต้น)"}),"\n",(0,i.jsx)(e.li,{children:"ดำเนินการทดสอบหรือตรวจสอบการสร้าง"}),"\n",(0,i.jsx)(e.li,{children:"สร้างเอกสารหรือเมตาดาต้า"}),"\n",(0,i.jsx)(e.li,{children:"ล้างไฟล์ชั่วคราว"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"ตัวอย่าง:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"onBefore: async (gez, pkg) => {\n  // เพิ่มเอกสาร\n  await fs.writeFile('dist/README.md', '# My App');\n  await fs.writeFile('dist/LICENSE', 'MIT License');\n\n  // ดำเนินการทดสอบ\n  await runTests();\n\n  // สร้างเอกสาร\n  await generateDocs();\n\n  // ล้างไฟล์ชั่วคราว\n  await cleanupTempFiles();\n}\n"})}),"\n",(0,i.jsxs)(e.h4,{id:"onafter",children:["onAfter",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#onafter",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"ฟังก์ชันคอลแบ็กสำหรับการประมวลผลหลังการแพ็คเกจเสร็จสิ้น จะถูกเรียกใช้หลังจากสร้างไฟล์ .tgz แล้ว ใช้สำหรับประมวลผลผลลัพธ์การแพ็คเกจ"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["พารามิเตอร์:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"gez: Gez"})," - อินสแตนซ์ Gez"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"pkg: Record<string, any>"})," - เนื้อหา package.json"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"file: Buffer"})," - เนื้อหาไฟล์ที่แพ็คแล้ว"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["ค่าส่งกลับ: ",(0,i.jsx)(e.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"การใช้งานทั่วไป:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"เผยแพร่ไปยัง npm registry (สาธารณะหรือส่วนตัว)"}),"\n",(0,i.jsx)(e.li,{children:"อัปโหลดไปยังเซิร์ฟเวอร์ทรัพยากรสถิต"}),"\n",(0,i.jsx)(e.li,{children:"ดำเนินการจัดการเวอร์ชัน"}),"\n",(0,i.jsx)(e.li,{children:"เรียกใช้งานกระบวนการ CI/CD"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"ตัวอย่าง:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"onAfter: async (gez, pkg, file) => {\n  // เผยแพร่ไปยัง npm registry ส่วนตัว\n  await publishToRegistry(file, {\n    registry: 'https://registry.example.com'\n  });\n\n  // อัปโหลดไปยังเซิร์ฟเวอร์ทรัพยากรสถิต\n  await uploadToServer(file, 'https://assets.example.com/packages');\n\n  // สร้างแท็กเวอร์ชันใน Git\n  await createGitTag(pkg.version);\n\n  // เรียกใช้งานกระบวนการ deploy\n  await triggerDeploy(pkg.version);\n}\n"})}),"\n",(0,i.jsxs)(e.h2,{id:"ตัวอย่างการใช้งาน",children:["ตัวอย่างการใช้งาน",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#ตัวอย่างการใช้งาน",children:"#"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n  modules: {\n    // กำหนดค่าโมดูลที่ต้องการส่งออก\n    exports: [\n      'root:src/components/button.vue',\n      'root:src/utils/format.ts',\n      'npm:vue',\n      'npm:vue-router'\n    ]\n  },\n  // การกำหนดค่าแพ็คเกจ\n  pack: {\n    // เปิดใช้งานฟังก์ชันการแพ็คเกจ\n    enable: true,\n\n    // ส่งออกหลายเวอร์ชันพร้อมกัน\n    outputs: [\n      'dist/versions/latest.tgz',\n      'dist/versions/1.0.0.tgz'\n    ],\n\n    // กำหนดค่า package.json เอง\n    packageJson: async (gez, pkg) => {\n      pkg.version = '1.0.0';\n      return pkg;\n    },\n\n    // การเตรียมการก่อนการแพ็คเกจ\n    onBefore: async (gez, pkg) => {\n      // เพิ่มไฟล์ที่จำเป็น\n      await fs.writeFile('dist/README.md', '# Your App\\n\\nคำอธิบายการส่งออกโมดูล...');\n      // ดำเนินการตรวจสอบประเภท\n      await runTypeCheck();\n    },\n\n    // การประมวลผลหลังการแพ็คเกจ\n    onAfter: async (gez, pkg, file) => {\n      // เผยแพร่ไปยัง npm registry ส่วนตัว\n      await publishToRegistry(file, {\n        registry: 'https://npm.your-registry.com/'\n      });\n      // หรือ deploy ไปยังเซิร์ฟเวอร์สถิต\n      await uploadToServer(file, 'https://static.example.com/packages');\n    }\n  }\n} satisfies GezOptions;\n"})})]})}function a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,r.ah)(),n.components);return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}let l=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["th%2Fapi%2Fcore%2Fpack-config.md"]={toc:[{text:"นิยามประเภท",id:"นิยามประเภท",depth:2},{text:"PackConfig",id:"packconfig-1",depth:3},{text:"enable",id:"enable",depth:4},{text:"outputs",id:"outputs",depth:4},{text:"packageJson",id:"packagejson",depth:4},{text:"onBefore",id:"onbefore",depth:4},{text:"onAfter",id:"onafter",depth:4},{text:"ตัวอย่างการใช้งาน",id:"ตัวอย่างการใช้งาน",depth:2}],title:"PackConfig",headingTitle:"PackConfig",frontmatter:{titleSuffix:"Gez Framework Packaging Configuration API Reference",description:"รายละเอียดเกี่ยวกับอินเทอร์เฟซการกำหนดค่า PackConfig ของเฟรมเวิร์ก Gez รวมถึงกฎการแพ็คเกจซอฟต์แวร์ การกำหนดค่าผลลัพธ์ และฮุควงจรชีวิต ช่วยให้นักพัฒนาสามารถดำเนินกระบวนการสร้างมาตรฐานได้",head:[["meta",{property:"keywords",content:"Gez, PackConfig, การแพ็คเกจซอฟต์แวร์, การกำหนดค่าการสร้าง, ฮุควงจรชีวิต, การกำหนดค่าแพ็คเกจ, เว็บแอปพลิเคชันเฟรมเวิร์ก"}]]}}}}]);