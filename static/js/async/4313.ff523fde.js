"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["4313"],{82961:function(e,n,r){r.r(n),r.d(n,{default:()=>c});var s=r(31549),i=r(6603);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",strong:"strong",h2:"h2",h3:"h3",pre:"pre",code:"code",h4:"h4"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"rendercontext",children:["RenderContext",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rendercontext",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"RenderContext เป็นคลาสหลักในเฟรมเวิร์ก Gez ที่รับผิดชอบในการจัดการวงจรชีวิตทั้งหมดของการเรนเดอร์ฝั่งเซิร์ฟเวอร์ (SSR) มันให้ชุด API ที่สมบูรณ์สำหรับการจัดการบริบทการเรนเดอร์ การจัดการทรัพยากร การซิงโครไนซ์สถานะ และงานสำคัญอื่นๆ:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"การควบคุมการเรนเดอร์"}),": จัดการกระบวนการเรนเดอร์ฝั่งเซิร์ฟเวอร์ รองรับการเรนเดอร์หลายทางเข้า การเรนเดอร์ตามเงื่อนไข และสถานการณ์อื่นๆ"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"การจัดการทรัพยากร"}),": รวบรวมและฉีดทรัพยากรสแตติกเช่น JS, CSS อย่างชาญฉลาด เพื่อเพิ่มประสิทธิภาพการโหลด"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"การซิงโครไนซ์สถานะ"}),": จัดการการซีเรียไลซ์สถานะฝั่งเซิร์ฟเวอร์ เพื่อให้แน่ใจว่าฝั่งไคลเอนต์สามารถเปิดใช้งานได้อย่างถูกต้อง (hydration)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"การควบคุมเส้นทาง"}),": รองรับการเปลี่ยนเส้นทางฝั่งเซิร์ฟเวอร์ การตั้งค่ารหัสสถานะ และฟังก์ชันขั้นสูงอื่นๆ"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"นิยามประเภท",children:["นิยามประเภท",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#นิยามประเภท",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"serverrenderhandle",children:["ServerRenderHandle",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serverrenderhandle",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"นิยามประเภทของฟังก์ชันการจัดการการเรนเดอร์ฝั่งเซิร์ฟเวอร์"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ServerRenderHandle = (rc: RenderContext) => Promise<void> | void;\n"})}),"\n",(0,s.jsx)(n.p,{children:"ฟังก์ชันการจัดการการเรนเดอร์ฝั่งเซิร์ฟเวอร์เป็นฟังก์ชันแบบอะซิงโครนัสหรือซิงโครนัสที่รับอินสแตนซ์ของ RenderContext เป็นพารามิเตอร์ ใช้สำหรับการจัดการลอจิกการเรนเดอร์ฝั่งเซิร์ฟเวอร์"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// 1. ฟังก์ชันอะซิงโครนัส\nexport default async (rc: RenderContext) => {\n  const app = createApp();\n  const html = await renderToString(app);\n  rc.html = html;\n};\n\n// 2. ฟังก์ชันซิงโครนัส\nexport const simple = (rc: RenderContext) => {\n  rc.html = '<h1>Hello World</h1>';\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"renderfiles",children:["RenderFiles",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#renderfiles",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"นิยามประเภทของรายการไฟล์ทรัพยากรที่รวบรวมระหว่างกระบวนการเรนเดอร์"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderFiles {\n  js: string[];\n  css: string[];\n  modulepreload: string[];\n  resources: string[];\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"js"}),": รายการไฟล์ JavaScript"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"css"}),": รายการไฟล์สไตล์ชีต"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"modulepreload"}),": รายการโมดูล ESM ที่ต้องการโหลดล่วงหน้า"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"resources"}),": รายการไฟล์ทรัพยากรอื่นๆ (รูปภาพ, ฟอนต์, ฯลฯ)"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// ตัวอย่างรายการไฟล์ทรัพยากร\nrc.files = {\n  js: [\n    '/assets/entry-client.js',\n    '/assets/vendor.js'\n  ],\n  css: [\n    '/assets/main.css',\n    '/assets/vendor.css'\n  ],\n  modulepreload: [\n    '/assets/Home.js',\n    '/assets/About.js'\n  ],\n  resources: [\n    '/assets/logo.png',\n    '/assets/font.woff2'\n  ]\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmapmode",children:["ImportmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"นิยามโหมดการสร้าง importmap"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ImportmapMode = 'inline' | 'js';\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"inline"}),": ฝังเนื้อหา importmap ลงใน HTML โดยตรง เหมาะสำหรับสถานการณ์ต่อไปนี้:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ต้องการลดจำนวนคำขอ HTTP"}),"\n",(0,s.jsx)(n.li,{children:"เนื้อหา importmap มีขนาดเล็ก"}),"\n",(0,s.jsx)(n.li,{children:"ต้องการประสิทธิภาพการโหลดหน้าจอแรกสูง"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"js"}),": สร้างเนื้อหา importmap เป็นไฟล์ JS แยกต่างหาก เหมาะสำหรับสถานการณ์ต่อไปนี้:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"เนื้อหา importmap มีขนาดใหญ่"}),"\n",(0,s.jsx)(n.li,{children:"ต้องการใช้กลไกแคชของเบราว์เซอร์"}),"\n",(0,s.jsx)(n.li,{children:"หลายหน้าเว็บใช้ importmap เดียวกัน"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"คลาส RenderContext รับผิดชอบในการจัดการทรัพยากรและการสร้าง HTML ในกระบวนการเรนเดอร์ฝั่งเซิร์ฟเวอร์ (SSR)"}),"\n",(0,s.jsxs)(n.h2,{id:"ตัวเลือกอินสแตนซ์",children:["ตัวเลือกอินสแตนซ์",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ตัวเลือกอินสแตนซ์",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"นิยามตัวเลือกการกำหนดค่าสำหรับ RenderContext"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderContextOptions {\n  base?: string\n  entryName?: string\n  params?: Record<string, any>\n  importmapMode?: ImportmapMode\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"base",children:["base",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"เส้นทางพื้นฐานสำหรับทรัพยากรสแตติก"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ทรัพยากรสแตติกทั้งหมด (JS, CSS, รูปภาพ, ฯลฯ) จะโหลดตามเส้นทางนี้"}),"\n",(0,s.jsx)(n.li,{children:"รองรับการกำหนดค่าแบบไดนามิกขณะรันไทม์ ไม่จำเป็นต้องสร้างใหม่"}),"\n",(0,s.jsx)(n.li,{children:"มักใช้ในเว็บไซต์หลายภาษา แอปพลิเคชันไมโครฟรอนต์เอนด์ และสถานการณ์อื่นๆ"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"entryname",children:["entryName",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ชื่อฟังก์ชันทางเข้าสำหรับการเรนเดอร์ฝั่งเซิร์ฟเวอร์ ใช้เพื่อระบุฟังก์ชันทางเข้าที่จะใช้เมื่อโมดูลส่งออกฟังก์ชันการเรนเดอร์หลายฟังก์ชัน"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"export const mobile = async (rc: RenderContext) => {\n  // ลอจิกการเรนเดอร์สำหรับอุปกรณ์เคลื่อนที่\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // ลอจิกการเรนเดอร์สำหรับเดสก์ท็อป\n};\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"params",children:["params",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"พารามิเตอร์การเรนเดอร์ สามารถส่งพารามิเตอร์ประเภทใดก็ได้ไปยังฟังก์ชันการเรนเดอร์ มักใช้สำหรับส่งข้อมูลคำขอ (URL, พารามิเตอร์ query, ฯลฯ)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN',\n    theme: 'dark'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"importmapmode-1",children:["importmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"โหมดการสร้าง Import Map:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inline"}),": ฝังเนื้อหา importmap ลงใน HTML โดยตรง"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"js"}),": สร้างเนื้อหา importmap เป็นไฟล์ JS แยกต่างหาก"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"คุณสมบัติอินสแตนซ์",children:["คุณสมบัติอินสแตนซ์",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#คุณสมบัติอินสแตนซ์",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"gez",children:["gez",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gez",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"Gez"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"อ่านได้อย่างเดียว"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"การอ้างอิงอินสแตนซ์ Gez ใช้สำหรับเข้าถึงฟังก์ชันหลักและการกำหนดค่าของเฟรมเวิร์ก"}),"\n",(0,s.jsxs)(n.h3,{id:"redirect",children:["redirect",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#redirect",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"string | null"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ที่อยู่สำหรับเปลี่ยนเส้นทาง เมื่อตั้งค่าแล้ว เซิร์ฟเวอร์สามารถทำการเปลี่ยนเส้นทาง HTTP ตามค่านี้ มักใช้ในสถานการณ์เช่นการตรวจสอบการเข้าสู่ระบบ การควบคุมสิทธิ์ ฯลฯ"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// ตัวอย่างการตรวจสอบการเข้าสู่ระบบ\nexport default async (rc: RenderContext) => {\n  if (!isLoggedIn()) {\n    rc.redirect = '/login';\n    rc.status = 302;\n    return;\n  }\n  // ดำเนินการเรนเดอร์หน้าต่อไป...\n};\n\n// ตัวอย่างการควบคุมสิทธิ์\nexport default async (rc: RenderContext) => {\n  if (!hasPermission()) {\n    rc.redirect = '/403';\n    rc.status = 403;\n    return;\n  }\n  // ดำเนินการเรนเดอร์หน้าต่อไป...\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"status",children:["status",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#status",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"number | null"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"รหัสสถานะ HTTP สามารถตั้งค่ารหัสสถานะ HTTP ที่ถูกต้องใดก็ได้ มักใช้ในสถานการณ์เช่นการจัดการข้อผิดพลาด การเปลี่ยนเส้นทาง ฯลฯ"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// ตัวอย่างการจัดการข้อผิดพลาด 404\nexport default async (rc: RenderContext) => {\n  const page = await findPage(rc.params.url);\n  if (!page) {\n    rc.status = 404;\n    // เรนเดอร์หน้า 404...\n    return;\n  }\n  // ดำเนินการเรนเดอร์หน้าต่อไป...\n};\n\n// ตัวอย่างการเปลี่ยนเส้นทางชั่วคราว\nexport default async (rc: RenderContext) => {\n  if (needMaintenance()) {\n    rc.redirect = '/maintenance';\n    rc.status = 307; // เปลี่ยนเส้นทางชั่วคราว รักษาวิธีการคำขอเดิม\n    return;\n  }\n  // ดำเนินการเรนเดอร์หน้าต่อไป...\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"html",children:["html",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"เนื้อหา HTML ใช้สำหรับตั้งค่าและรับเนื้อหา HTML สุดท้ายที่สร้างขึ้น เมื่อตั้งค่าจะจัดการตัวยึดตำแหน่งเส้นทางพื้นฐานโดยอัตโนมัติ"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// การใช้งานพื้นฐาน\nexport default async (rc: RenderContext) => {\n  // ตั้งค่าเนื้อหา HTML\n  rc.html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        ${rc.preload()}\n        ${rc.css()}\n      </head>\n      <body>\n        <div id=\"app\">Hello World</div>\n        ${rc.importmap()}\n        ${rc.moduleEntry()}\n        ${rc.modulePreload()}\n      </body>\n    </html>\n  `;\n};\n\n// เส้นทางพื้นฐานแบบไดนามิก\nconst rc = await gez.render({\n  base: '/app',  // ตั้งค่าเส้นทางพื้นฐาน\n  params: { url: req.url }\n});\n\n// ตัวยึดตำแหน่งใน HTML จะถูกแทนที่โดยอัตโนมัติ:\n// [[[___GEZ_DYNAMIC_BASE___]]]/your-app-name/css/style.css\n// ถูกแทนที่ด้วย:\n// /app/your-app-name/css/style.css\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"base-1",children:["base",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"อ่านได้อย่างเดียว"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"เส้นทางพื้นฐานสำหรับทรัพยากรสแตติก ทรัพยากรสแตติกทั้งหมด (JS, CSS, รูปภาพ, ฯลฯ) จะโหลดตามเส้นทางนี้ รองรับการกำหนดค่าแบบไดนามิกขณะรันไทม์"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// การใช้งานพื้นฐาน\nconst rc = await gez.render({\n  base: '/gez',  // ตั้งค่าเส้นทางพื้นฐาน\n  params: { url: req.url }\n});\n\n// ตัวอย่างเว็บไซต์หลายภาษา\nconst rc = await gez.render({\n  base: '/cn',  // เว็บไซต์ภาษาจีน\n  params: { lang: 'zh-CN' }\n});\n\n// ตัวอย่างแอปพลิเคชันไมโครฟรอนต์เอนด์\nconst rc = await gez.render({\n  base: '/app1',  // แอปพลิเคชันย่อย 1\n  params: { appId: 1 }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"entryname-1",children:["entryName",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"อ่านได้อย่างเดียว"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ชื่อฟังก์ชันทางเข้าสำหรับการเรนเดอร์ฝั่งเซิร์ฟเวอร์ ใช้เพื่อเลือกฟังก์ชันการเรนเดอร์จาก entry.server.ts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// ฟังก์ชันทางเข้าเริ่มต้น\nexport default async (rc: RenderContext) => {\n  // ลอจิกการเรนเดอร์เริ่มต้น\n};\n\n// หลายฟังก์ชันทางเข้า\nexport const mobile = async (rc: RenderContext) => {\n  // ลอจิกการเรนเดอร์สำหรับอุปกรณ์เคลื่อนที่\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // ลอจิกการเรนเดอร์สำหรับเดสก์ท็อป\n};\n\n// เลือกฟังก์ชันทางเข้าตามประเภทอุปกรณ์\nconst rc = await gez.render({\n  entryName: isMobile ? 'mobile' : 'desktop',\n  params: { url: req.url }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"params-1",children:["params",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"อ่านได้อย่างเดียว"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"พารามิเตอร์การเรนเดอร์ สามารถส่งและเข้าถึงพารามิเตอร์ระหว่างกระบวนการเรนเดอร์ฝั่งเซิร์ฟเวอร์ มักใช้สำหรับส่งข้อมูลคำขอ การกำหนดค่าหน้า ฯลฯ"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// การใช้งานพื้นฐาน - ส่ง URL และการตั้งค่าภาษา\nconst rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN'\n  }\n});\n\n// การกำหนดค่าหน้า - ตั้งค่าธีมและเลย์เอาต์\nconst rc = await gez.render({\n  params: {\n    theme: 'dark',\n    layout: 'sidebar'\n  }\n});\n\n// การกำหนดค่าสภาพแวดล้อม - ฉีดที่อยู่ API\nconst rc = await gez.render({\n  params: {\n    apiBaseUrl: process.env.API_BASE_URL,\n    version: '1.0.0'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmetaset",children:["importMetaSet",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmetaset",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"Set<ImportMeta>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ชุดการรวบรวมการพึ่งพาโมดูล ในการเรนเดอร์คอมโพเนนต์จะติดตามและบันทึกการพึ่งพาโมดูลโดยอัตโนมัติ รวบรวมเฉพาะทรัพยากรที่ใช้จริงในการเรนเดอร์หน้าปัจจุบัน"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// การใช้งานพื้นฐาน\nconst renderToString = (app: any, context: { importMetaSet: Set<ImportMeta> }) => {\n  // รวบรวมการพึ่งพาโมดูลโดยอัตโนมัติระหว่างกระบวนการเรนเดอร์\n  // เฟรมเวิร์กจะเรียก context.importMetaSet.add(import.meta) โดยอัตโนมัติเมื่อเรนเดอร์คอมโพเนนต์\n  // นักพัฒนาไม่จำเป็นต้องจัดการการรวบรวมการพึ่งพาด้วยตนเอง\n  return '<div id=\"app\">Hello World</div>';\n};\n\n// ตัวอย่างการใช้งาน\nconst app = createApp();\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"files",children:["files",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#files",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"RenderFiles"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"รายการไฟล์ทรัพยากร:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"js: รายการไฟล์ JavaScript"}),"\n",(0,s.jsx)(n.li,{children:"css: รายการไฟล์สไตล์ชีต"}),"\n",(0,s.jsx)(n.li,{children:"modulepreload: รายการโมดูล ESM ที่ต้องการโหลดล่วงหน้า"}),"\n",(0,s.jsx)(n.li,{children:"resources: รายการไฟล์ทรัพยากรอื่นๆ (รูปภาพ, ฟอนต์, ฯลฯ)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// การรวบรวมทรัพยากร\nawait rc.commit();\n\n// การฉีดทรัพยากร\nrc.html = `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    \x3c!-- โหลดทรัพยากรล่วงหน้า --\x3e\n    ${rc.preload()}\n    \x3c!-- ฉีดสไตล์ชีต --\x3e\n    ${rc.css()}\n  </head>\n  <body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n  </body>\n  </html>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmapmode-2",children:["importmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-2",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ประเภท"}),": ",(0,s.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าเริ่มต้น"}),": ",(0,s.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"โหมดการสร้าง Import Map:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inline"}),": ฝังเนื้อหา importmap ลงใน HTML โดยตรง"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"js"}),": สร้างเนื้อหา importmap เป็นไฟล์ JS แยกต่างหาก"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"เมธอดอินสแตนซ์",children:["เมธอดอินสแตนซ์",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#เมธอดอินสแตนซ์",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"serialize",children:["serialize()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serialize",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"พารามิเตอร์"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input: any"})," - ข้อมูลที่ต้องการซีเรียไลซ์"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options?: serialize.SerializeJSOptions"})," - ตัวเลือกการซีเรียไลซ์"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าที่ส่งกลับ"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ซีเรียไลซ์ออบเจ็กต์ JavaScript เป็นสตริง ใช้สำหรับซีเรียไลซ์ข้อมูลสถานะระหว่างกระบวนการเรนเดอร์ฝั่งเซิร์ฟเวอร์ เพื่อให้แน่ใจว่าข้อมูลสามารถฝังลงใน HTML ได้อย่างปลอดภัย"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const state = {\n  user: { id: 1, name: 'Alice' },\n  timestamp: new Date()\n};\n\nrc.html = `\n  <script>\n    window.__INITIAL_STATE__ = ${rc.serialize(state)};\n  <\/script>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"state",children:["state()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#state",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"พารามิเตอร์"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"varName: string"})," - ชื่อตัวแปร"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data: Record<string, any>"})," - ข้อมูลสถานะ"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าที่ส่งกลับ"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ซีเรียไลซ์ข้อมูลสถานะและฉีดลงใน HTML ใช้วิธีการซีเรียไลซ์ที่ปลอดภัยสำหรับการประมวลผลข้อมูล รองรับโครงสร้างข้อมูลที่ซับซ้อน"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const userInfo = {\n  id: 1,\n  name: 'John',\n  roles: ['admin']\n};\n\nrc.html = `\n  <head>\n    ${rc.state('__USER__', userInfo)}\n  </head>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"commit",children:["commit()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#commit",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ค่าที่ส่งกลับ"}),": ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ส่งการรวบรวมการพึ่งพาและอัปเดตรายการทรัพยากร รวบรวมโมดูลทั้งหมดที่ใช้จาก importMetaSet และวิเคราะห์ทรัพยากรเฉพาะของแต่ละโมดูลตามไฟล์"})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let c=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["th%2Fapi%2Fcore%2Frender-context.md"]={toc:[{text:"นิยามประเภท",id:"นิยามประเภท",depth:2},{text:"ServerRenderHandle",id:"serverrenderhandle",depth:3},{text:"RenderFiles",id:"renderfiles",depth:3},{text:"ImportmapMode",id:"importmapmode",depth:3},{text:"ตัวเลือกอินสแตนซ์",id:"ตัวเลือกอินสแตนซ์",depth:2},{text:"base",id:"base",depth:4},{text:"entryName",id:"entryname",depth:4},{text:"params",id:"params",depth:4},{text:"importmapMode",id:"importmapmode-1",depth:4},{text:"คุณสมบัติอินสแตนซ์",id:"คุณสมบัติอินสแตนซ์",depth:2},{text:"gez",id:"gez",depth:3},{text:"redirect",id:"redirect",depth:3},{text:"status",id:"status",depth:3},{text:"html",id:"html",depth:3},{text:"base",id:"base-1",depth:3},{text:"entryName",id:"entryname-1",depth:3},{text:"params",id:"params-1",depth:3},{text:"importMetaSet",id:"importmetaset",depth:3},{text:"files",id:"files",depth:3},{text:"importmapMode",id:"importmapmode-2",depth:3},{text:"เมธอดอินสแตนซ์",id:"เมธอดอินสแตนซ์",depth:2},{text:"serialize()",id:"serialize",depth:3},{text:"state()",id:"state",depth:3},{text:"commit()",id:"commit",depth:3}],title:"RenderContext",headingTitle:"RenderContext",frontmatter:{titleSuffix:"Gez Framework Render Context API Reference",description:"Detailed explanation of the RenderContext core class in the Gez framework, including rendering control, resource management, state synchronization, and routing control, helping developers achieve efficient server-side rendering.",head:[["meta",{property:"keywords",content:"Gez, RenderContext, SSR, Server-Side Rendering, Rendering Context, State Synchronization, Resource Management, Web Application Framework"}]]}}}}]);